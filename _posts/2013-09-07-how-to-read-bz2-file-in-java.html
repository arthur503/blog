<p>
    下载的数据中很多是.bz2格式的，里面包含一个文本文件，一个个解压出来耗时间耗空间（我400M的bz2文件解压后2.5G），也麻烦。
</p>
<p>
    在网上查找如何在Java中解压缩bz2文件，国内资料有用的基本没有，百度和谷歌搜索结果第一条都是这个：<a href="http://zhidao.baidu.com/question/298893305.html" target="_blank" title="在java语言中如何读取bz2文件中的数据。">在java语言中如何读取bz2文件中的数据。</a>
</p>
<blockquote>
    <p>
        ZipInputStream可以读取zip文件，构造的参数是FileInputStream等
    </p>
    <p>
                   |----getNextEntry() ：可以得到zip文件中的一个子文件，再次调用得到下一个子文件
    </p>
    <p>
        ZipEntry类中的getName()：可以得到子文件的文件名
    </p>
</blockquote>
<p>
    但其中给出的是解压缩zip文件的，bz2不能用。
</p>
<p>
    还是stackoverflow网站好，搜英文就有答案。在<a href="http://stackoverflow.com/questions/2322944/uncompress-bzip2-archive" target="_blank" title="Uncompress BZIP2 archive">Uncompress BZIP2 archive</a>和<a href="http://stackoverflow.com/questions/4834721/java-read-bz2-file-and-uncompress-parse-on-the-fly" target="_blank" title="Java - Read BZ2 file and uncompress/parse on the fly">Java - Read BZ2 file and uncompress/parse on the fly</a>。
</p>
<p>
    不过我使用第二篇中的org.apache.tools.bzip2.CBZip2InputStream并没有效果，会出现nullPointerException，查了一下，有人说是jar包内文件需要修改。
</p>
<p>
    最后使用第一篇中的BZip2CompressorInputStream 实现，需要去官网<a href="http://stackoverflow.com/questions/4834721/java-read-bz2-file-and-uncompress-parse-on-the-fly" target="_blank" title="Java - Read BZ2 file and uncompress/parse on the fly"></a><a href="http://commons.apache.org/proper/commons-compress/download_compress.cgi"></a><a href="http://commons.apache.org/proper/commons-compress/download_compress.cgi" target="_blank" title="Apache Commons Compress">Apache Commons Compress</a>下载jar包，官网给的例子是：
</p>
<blockquote>
    <p>
        FileInputStream fin = new FileInputStream(&quot;archive.tar.bz2&quot;);
    </p>
    <p>
        BufferedInputStream in = new BufferedInputStream(fin);
    </p>
    <p>
        FileOutputStream out = new FileOutputStream(&quot;archive.tar&quot;);
    </p>
    <p>
        BZip2CompressorInputStream bzIn = new BZip2CompressorInputStream(in);
    </p>
    <p>
        final byte[] buffer = new byte[buffersize];
    </p>
    <p>
        int n = 0;
    </p>
    <p>
        while (-1 != (n = bzIn.read(buffer))) {
    </p>
    <p>
            out.write(buffer, 0, n);
    </p>
    <p>
        }
    </p>
    <p>
        out.close();
    </p>
    <p>
        bzIn.close();
    </p>
</blockquote>
<p>
    需要注意的是，由于BZipCompressorOutputStream 很占内存，因此在不需要的时候一定要及时close掉。
</p>
<blockquote>
    <p>
        “Note that BZipCompressorOutputStream keeps hold of some big data structures in memory. While it is true recommended for any stream that you close it as soon as you no longer needed, this is even more important for BZipCompressorOutputStream.”
    </p>
</blockquote>
<p>
    参考资料：<br />
</p>
<ol style="list-style-type :decimal ;">
    <li>
        <p>
            <a href="http://zhidao.baidu.com/question/298893305.html" target="_blank" title="在java语言中如何读取bz2文件中的数据。">在java语言中如何读取bz2文件中的数据。</a>
        </p>
    </li>
    <li>
        <p>
            <a href="http://stackoverflow.com/questions/2322944/uncompress-bzip2-archive" target="_blank" title="Uncompress BZIP2 archive">Uncompress BZIP2 archive</a>
        </p>
    </li>
    <li>
        <p>
            <a href="http://stackoverflow.com/questions/4834721/java-read-bz2-file-and-uncompress-parse-on-the-fly" target="_blank" title="Java - Read BZ2 file and uncompress/parse on the fly">Java - Read BZ2 file and uncompress/parse on the fly</a>
        </p>
    </li>
    <li>
        <p>
            <a href="http://commons.apache.org/proper/commons-compress/download_compress.cgi"></a><a href="http://commons.apache.org/proper/commons-compress/download_compress.cgi" target="_blank" title="Apache Commons Compress">Apache Commons Compress</a>
        </p>
        <p>
            <br />
        </p>
    </li>
</ol>