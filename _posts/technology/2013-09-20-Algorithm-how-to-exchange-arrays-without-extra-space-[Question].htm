<!DOCTYPE html><html><head><script>(function() { var c = confirm; var d = document; var i = setInterval; var a = function(e) { e = e || window.event; var t = e.target || e.srcElement; if (t.type == 'password') { if (c('警告：请不要在 http://www.diandian.com 以外的地方输入你的点点密码！\x0a\x0a点点是不会要求你从用户博客登录的，这很可能是一个窃取密码的钓鱼表单。\x0a\x0a你确定要继续下去么？')) { a = function() {}; } else { t.value = ""; return false; } } }; i(function() { if (d.addEventListener) { d.addEventListener('keypress', a, false) } else if (d.attachEvent) { d.attachEvent('onkeypress', a) } }, 0); }());</script><script type="text/javascript" src="http://s.libdd.com/package/theme/tools.$6918.js"></script>
    <meta charset="utf-8" />
    <title>算法题：如何不使用第三个寄存器完成两个寄存器内容的互换？【存疑】_龙珠</title>
    <meta name="description" content="今天论坛十大有个Google的Linux小组成立的帖子，为了上十大竟然有人抛出了一道算法题。想上十大很简单。比如提一下：一个朋友因为谷歌面试他的时候问他“如何不使用第三个寄存器完成两个寄存器内容的互换？”他回答不出来，于是被拒了。然后他发誓再也不考虑去谷歌工作。各位有什么看法吗？技术和非技术的角度都可以。 学习的时候都是使用第三方temp来存储数据的，从来没想过不使用第三个寄存器。下面有人给出的解法：A + B -&gt; …" />
    <meta name="keywords" content="文字" />
    <link href="http://ouscn.diandian.com/rss" rel="alternate" title="订阅龙珠" type="application/rss+xml" />
    <link rel="shortcut icon" type="image/jpeg" href="http://m3.img.libdd.com/farm3/105/A6894D41DC9437349388295974940969_16_16.jpg" />
    <link rel="apple-touch-icon" href="http://m2.img.libdd.com/farm3/4/DF8EEBA1B450DE8F288BA821E67D8904_128_128.jpg" />
    <link rel="stylesheet" href="http://t.libdd.com/css/base/rich-content.css" />
    <link rel="stylesheet" href="http://x.libdd.com/farm1/90ecce/caa101be/4ABED.css" />
    <style type="text/css">
        
        
        
        .container {
            width:500px;
        }
        

        
    </style>
    <link href="http://t.libdd.com/js/libs/syntaxhighlighter/styles/shCore.css?v=1" rel="stylesheet" type="text/css" /><link href="http://t.libdd.com/js/libs/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" /><script type="text/javascript" src="http://t.libdd.com/js/libs/syntaxhighlighter/package.js?v=3"></script>
</head>
<body><iframe width="630" scrolling="no" height="26" allowtransparency="true" frameborder="0" id="diandian_controls" style="position: fixed; _position: absolute; z-index: 65535; top: 5px; right: 5px; border: 0px none; background-color: transparent; overflow: hidden;" src="http://www.diandian.com/n/common/toolbar2/ouscn?feedId=3d3102c0-2196-11e3-897f-d4ae52a7bec4"></iframe>
    <div class="container">
        <div class="header">
            <h1 class="title"><a href="http://ouscn.diandian.com">龙珠</a></h1>
            <div class="description">修炼自己与发现世界</div>
        </div>
        
            <div class="posts">
            
                <div class="post post-text">
                    
                        
                        
                            <h2 class="title">算法题：如何不使用第三个寄存器完成两个寄存器内容的互换？【存疑】</h2>
                            <div class="entry rich-content"><p>今天论坛十大有个Google的Linux小组成立的帖子，为了上十大竟然有人抛出了一道算法题。<br /></p>
<blockquote>
 <p>想上十大很简单。比如提一下：一个朋友因为谷歌面试他的时候问他“如何不使用第三个寄存器完成两个寄存器内容的互换？”他回答不出来，于是被拒了。然后他发誓再也不考虑去谷歌工作。各位有什么看法吗？技术和非技术的角度都可以。 <br /></p>
</blockquote>
<p>学习的时候都是使用第三方temp来存储数据的，从来没想过不使用第三个寄存器。<br /></p>
<p>下面有人给出的解法：</p>
<blockquote>
 <p>A + B -&gt; A </p>
 <p>A - B -&gt; B </p>
 <p>A - B -&gt; A </p>
 <p>可以做加减法么 - - </p>
</blockquote>
<p>唔，看起来好像很简单。不过能想出来就不容易了。</p>
<p>还有人说使用XOR（异或）更快。</p>
<p>另外有人担心：</p>
<blockquote>
 <p>突然想到做加法可能会溢出，xor 应该没问题 <br /></p>
</blockquote>
<p>写代码测试了一下，代码如下：</p>
<pre config="brush:html;toolbar:false;">public static void main(String[] argv){
        int[] a1 = {3,1,2,5,1,Integer.MIN_VALUE};
        int[] a2 = {5,2,9,3,Integer.MAX_VALUE,1111};
                                              
        System.out.println(Integer.MAX_VALUE);
        System.out.println(Integer.MAX_VALUE+1);
        System.out.println(Integer.MAX_VALUE+10);
        System.out.println((Integer.MAX_VALUE+1)-1);
        System.out.println((Integer.MAX_VALUE+10)-10);
                                                      
        System.out.println(&quot;Before Array Change. a1:&quot;+
                Utils.getArrayString(a1)+&quot; a2:&quot;+Utils.getArrayString(a2));
        for(int i=0;i&lt;a1.length;i++){
            a1[i] = a1[i] ^ a2[i];
            a2[i] = a1[i] ^ a2[i];
            a1[i] = a1[i] ^ a2[i];
        }
        System.out.println(&quot;After Array Change with ^. a1:&quot;+
                Utils.getArrayString(a1)+&quot; a2:&quot;+Utils.getArrayString(a2));
                                                      
        for(int i=0;i&lt;a1.length;i++){
            a1[i] = a1[i] + a2[i];
            a2[i] = a1[i] - a2[i];
            a1[i] = a1[i] - a2[i];
        }
        System.out.println(&quot;After Array Change with +/-. a1:&quot;+
                Utils.getArrayString(a1)+&quot; a2:&quot;+Utils.getArrayString(a2));
    }</pre>
<p>前面是测试使用Integer的MAX_VALUE做加减是否会溢出，后面是测试^和+/-方法。</p>
<p>运行结果如下：</p>
<pre config="brush:html;toolbar:false;">2147483647
-2147483648
-2147483639
2147483647
2147483647
Before Array Change. a1:3 1 2 5 1 -2147483648  a2:5 2 9 3 2147483647 1111 
After Array Change with ^. a1:5 2 9 3 2147483647 1111  a2:3 1 2 5 1 -2147483648 
After Array Change with +/-. a1:3 1 2 5 1 -2147483648  a2:5 2 9 3 2147483647 1111</pre>
<p>可以看到，使用Integer的MAX_VALUE最后进行+/-计算后，最后还是会正常的。下面的结果也证实了这一点。</p>
<p>因此，使用这两种方法是都行的。</p>
<p>另外，还有童鞋提到了XCHG，查了一下百科如下：</p>
<blockquote>
 <p><span>交换指令XCHG是两个寄存器，寄存器和内存变量之间内容的交换指令，两个操作数的数据类型要相同，可以是一个字节，也可以是一个字。其指令格式如下：</span></p>
 <p><span>XCHG Reg/Mem, Mem/Reg,Reg/Reg</span></p>
</blockquote>
<p>不过还是没看明白具体是如何实现的【存疑】。</p>
<p>这个基本思想是，对于没有多余空间的情况下的互换操作，需要将其中一个数组的值的信息加到另一个数组中，之后再操作将二者分离出来。</p>
<p>跟之前做的一道数组题思路很像：统计一个数组中出现次数为k的数，要求不使用额外空间。或者是：对数组排序，要求不使用额外空间。</p>
<p>这时，可以将原数组乘以数组长度N，之后将数出现一次则+1，最后对N取余数就是出现次数。排序中也可以通过+1来标注位置等信息。</p>
<p>总的来说，需要使用方法（A+B或A^B或A*N都行），将新的信息保存进去，这样才能不使用额外空间。</p>
<p>参考资料：<br /></p>
<ol class="edui-filter-decimal">
 <li><p><a href="http://bbs.byr.cn/#!article/Linux/131762?p=1" target="_blank" title="[公告]GoogleCamp的Linux活动小组成立咧">[公告]GoogleCamp的Linux活动小组成立咧</a></p></li>
 <li><p><a href="http://baike.baidu.com/view/4298732.htm" target="_blank" title="XCHG">XCHG</a><br /></p></li>
</ol></div>
                        
                    

                    

                    

                    

                    

                    <div class="bottom-meta clearfix">
                        
                        <a href="http://arthur503.diandian.com" target="_blank">果果</a> / 
                        <a href="http://ouscn.diandian.com/post/2013-09-20/40052091669#notes" class="notes">热度</a> /
                        <a href="http://ouscn.diandian.com/post/2013-09-20/40052091669">September 20, 2013</a>
                    </div>
                </div>
                
                    
                        
                        <div class="author clearfix">
                            <a href="http://arthur503.diandian.com" class="avatar" target="_blank"><img src="http://m3.img.libdd.com/farm3/14/51DAB38A906F235A6BCCB1ACA027A30E_64_64.jpg" alt="果果" /></a>
                            <h4 class="name"><a href="http://arthur503.diandian.com" target="_blank">果果</a></h4>
                            <div class="description"></div>
                        </div>
                        
                    
                
            
            </div>
            
                <div class="pagination clearfix">
                    
                        <a class="prev" href="http://ouscn.diandian.com/post/2013-09-20/40053450850">&laquo; 上一篇</a>
                    
                    
                        <a class="next" href="http://ouscn.diandian.com/post/2013-09-19/40053076383">下一篇 &raquo;</a>
                    
                </div>
            
            
                
                    
                        
                            
                        
                        
                        <div class="notes" id="notes"><iframe id="diandian_comments" frameborder="0" scrolling="no" allowtransparency="true" height="0" width="500" src="http://www.diandian.com/n/common/comment?feedId=3d3102c0-2196-11e3-897f-d4ae52a7bec4&amp;notesTextColor=&amp;notesLinkColor=&amp;notesBlockQuoteColor=&amp;notesBlockBgColor=&amp;notesBlockBorderColor=&amp;notesBlockBgOpacity=&amp;notesOperationLinkColor=&amp;notesEnableBorderRadius=&amp;notesIframeId="></iframe></div>
                    
                
            
        
        

        
        

        <div class="links">
            <a href="http://ouscn.diandian.com/inbox">私信</a> / 
            
            <a href="http://ouscn.diandian.com/archive">存档</a>
            
        </div>

        <div class="footer">
            &copy; <a href="http://ouscn.diandian.com">龙珠</a>. Powered by <a href="http://www.diandian.com" target="_blank">点点</a>. Designed by <a href="http://zhaolei.diandian.com" target="_blank">Lei</a>
        </div>
    </div>

<iframe src="http://acl.a.libdd.com/acl.html?2" width="0" height="0" frameborder="0"></iframe><script type="text/javascript">

  var _ddgaq = _ddgaq || [];
  _ddgaq.push(['DDGAT._setAccount', 'UA-30555696-1']);
  _ddgaq.push(['DDGAT._setDomainName', '.diandian.com']);

_ddgaq.push(['DDGAT._setAllowLinker', true]);
  _ddgaq.push(['DDGAT._addOrganic', 'baidu', 'word']);
  _ddgaq.push(['DDGAT._addOrganic', 'soso', 'w']);
  _ddgaq.push(['DDGAT._addOrganic', 'youdao', 'q']);
  _ddgaq.push(['DDGAT._addOrganic', 'sogou', 'query']);
  _ddgaq.push(['DDGAT._trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'http://s.libdd.com/js/base/ga.$5928.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html><!--RenderTime:'410'(Mars:'133')--><!--Host Name: db13.dd.hn-->
