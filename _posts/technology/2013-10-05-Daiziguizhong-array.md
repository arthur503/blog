---
layout: default
title: 待字闺中：数组类题目之统计数字出现次数【存疑】
---
看@陈利人 老师的微信号“待字闺中”，有一段时间连续好几道数组题，把数组的各个思考方向都涵盖到了，所以萌生出总结一下的念头。主要是看看数组类题目的解题思路有哪些方向，分别适用于哪些场景。题目会一道道分析，慢慢添加的。

先来看看0911的题目：找数字续。题目如下：

> 一个数组A，数字出现的情况，只有以下三种：一些数字只出现一次；一些数字出现两次；只有一个数字出现三次。请给出方法，找到出现三次的数字。关注微信公众账号“待字闺中”，了解更多。

根据“先实现，后优化”的原则，我们先把最简单明显的思路列出来，之后再往下延伸，谈优化和最佳方案。

我想到的解决方法如下：

	/**
	 * 法一：使用HashMap存储，之后遍历元素找到count为3的数字。
	 * 
	 * 优点：万金油方法，适用范围广，可以用来找count为任意值的数字。
	 * 		若需要查找操作，时间复杂度O(1)。
	 * 缺点：需要占用额外空间。
	 * 复杂度：空间复杂度O(n)，时间复杂度O(n)。
	 */
	
	/**
	 * 法二：使用2位的bitmap存储，之后遍历找到count为3的数字。
	 * 由于最多出现3次，所以2位bit即可表示。
	 * 
	 * 优点：占用空间少，同样可以用来找count为任意值的数字。
	 * 		若需要查找操作，时间复杂度O(1)。
	 * 		另外，对题目而言此方法只需在建立过程中，若判断count==3，即为结果。
	 * 缺点：需要使用额外空间。
	 * 复杂度：空间复杂度O(n)，时间复杂度O(n)。
	 */
	
	/**
	 * 法三：使用本数组自身存储（元素*N），根据元素哈希值计算应该存储的位置。
	 * 若发生冲突则往后顺延（到末尾则移至开头），之后遍历找到count为3的数字。
	 * 
	 * 优点：不适用额外空间，可以用来找count为任意值的数字。
	 * 缺点：时间复杂度虽然同为O(n)，但遍历次数更多。
	 * 复杂度：空间复杂度O(1)，时间复杂度为O(n)。
	 * 问题：如何判断存储位置的值与本身相同（冲突情况下）？
	 */
		
但是，法三中的问题一直没想到如何解决。实际上就是：如何把数组中的数字映射到一个确定的位置（不发生冲突或发生冲突后依然可以辨认出原来的数字）。在这种方法中，如果是数组中数字为1~n，就很好解决，直接使用k-1作为数组下标即可。但是，如果数字的范围不确定，就无法将数字与位置一一映射。此时，不管数字重不重复，我们好像都无法解决数据映射位置冲突的情况。【存疑：无法解决吗？】

看了“待字闺中”微信号的解答，发现还遗漏了好多思路。最简单的如排序后统计，就没有往这方面去想。。

	/**
	 * 法四：快速排序，之后寻找连续为3的数字。
	 * 复杂度：时间复杂度O(nlog(n))。
	 */

另外，还有的同学思路是：

	/**
	 * 法五：取得A中所有元素的乘积p（假设p没有溢出），遍历数组查看p%(A<sub>i</sub>^3)
	 * 是否为0；若为0，则遍历数组查看A<sub>i</sub>出现次数是否为3.
	 * 复杂度：时间复杂度O(n^2)。
	 */

陈立人老师在微信号里只是给了这几个思路，并没有给出解答，而是留了一个思考题目：上面这个题目能否在时间复杂度O(n)，空间复杂度O(1)的条件下完成？如果不能怎么说明？

我想了下，能够想到的时间复杂度O(n)，空间复杂度O(1)的方法只有之前提到的法三，但是如何映射的问题还是没有解决。【存疑：如何解决，或者有其他的方法吗？】

查看了微博上的留言，有人的方法如下：

> 宝宝的贝贝先生：继续开一个大小32的数组，求二进制数位和，模3得到出现1,2次的数位和，模2得到出现1,3次的数位和，所有的数位和减去模2的得到出现2次的数位和，再类似折腾下就出来了... (9月11日 14:16)

但有人认为行不通：

> Li-D-SM：回复@宝宝的贝贝先生:感觉行不通，只看最低位，1的个数若为5.(1,1,1,3,5)(1,1,3,3,5,6,6,6).对于同样的5而言，1,6在最低位的数显然是不同的，无法得到出现三次的数字最低位是1还是0 (9月12日 13:22)

唔，我还没看懂。【存疑】


下面对在数组中，统计数字出现次数的题目进行总结：

1. 万金油解法HashMap统计；
2. 对数字进行统计若重复不多（如1、2次等）时，可以考虑bitmap；
3. 数组排序后统计；
4. 所有元素乘积对某元素的n次方取余，之后再判断是否确定（适用于元素为质数的情况，就无需再次确定，时间复杂度可以由O(n^2)变为O(n)）；
5. 使用本数组*N存储，哈希寻找存储位置？【存疑：问题未解决】
6. 二进制数位和方法？【存疑】
